# Story 4.2: Automate Testimonial Requests

## Status: Pending

## Story
**As a Conscious Creator,** I want the platform to automatically ask for a testimonial after an "Offering" is completed, **so that** I can consistently gather social proof without manual effort.

## Acceptance Criteria
1.  When an "Offering" is marked as "Completed" on the Harvest Circle dashboard, an automated workflow is triggered.
2.  The system sends a pre-defined, personalized message via Email or WhatsApp asking for feedback/testimonial.
3.  The message is based on templates that can be customized by the user in the settings.
4.  The system waits for a configurable amount of time (e.g., 3 days) after completion before sending the request.

## Tasks / Subtasks
- [ ] **Task 1: Implement Automation Trigger (AC: 1, 4)**
    - [ ] Create a Supabase Edge Function that is triggered when a sale/engagement is marked as "Completed".
    - [ ] Implement the delay logic within the Edge Function.
- [ ] **Task 2: Implement Message Sending (AC: 2)**
    - [ ] Integrate with Resend for email and Meta WhatsApp API for WhatsApp messages.
    - [ ] The Edge Function will send the message through the appropriate channel.
- [ ] **Task 3: Create Message Templates (AC: 3)**
    - [ ] Create a new table and migration for `message_templates`.
    - [ ] Build a UI in the settings for users to customize these templates.

## Dev Notes
*   Securely store API keys for the messaging services.
*   The automation should be reliable and handle potential failures gracefully.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2025-08-12 | 1.0 | Initial Draft | Sarah (PO) |
